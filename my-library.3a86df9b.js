!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},r={},n=t.parcelRequired7c6;null==n&&((n=function(e){if(e in a)return a[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return a[e]=n,t.call(n.exports,n,n.exports),n.exports}var d=new Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d}).register=function(e,t){r[e]=t},t.parcelRequired7c6=n);var d=n("bpxeT"),o=n("8nrFW"),c=n("2TvXO"),i=n("cidzk"),l=n("kitKc"),s=n("go8W7"),u=n("2Ch4P");function g(e){null!==e&&0!==e.length?s.gallery.innerHTML=function(e){return e.map((function(e){var t=e.poster_path,a=e.title,r=e.genres,n=e.release_date,d=e.id,o=function(e){return""===e?"no info":null==e?void 0:e.slice(0,4)}(n),c=a.toUpperCase(),i=p(t),l=function(e){return e.map((function(e){return e.id}))}(r);return'<li class="gallery__item" id='.concat(d,'>\n        <img\n          class="gallery__img"\n          src="').concat(i,'"\n          alt=').concat(a,'\n        />\n        <p class="gallery__name">').concat(c,'</p>\n        <p class="gallery__information">').concat((0,u.getGenre)(l)," | ").concat(o,"</p>\n    </li>")})).join("")}(e):s.gallery.innerHTML="<img src=https://cdn.dribbble.com/users/888330/screenshots/2653750/media/b7459526aeb0786638a2cf16951955b1.png />"}function p(e){return null===e?poster="https://via.placeholder.com/440x660.jpg?text=Image+Not+Found":"https://image.tmdb.org/t/p/w500".concat(e)}var m=n("kvC6y"),f=document.querySelector('[data-action="watched"]'),v=document.querySelector('[data-action="queue"]'),h=!0,b=!1;function S(e){(0,m.loaderShow)();var t=JSON.parse(localStorage.getItem("watchedCard"));(0,m.hideLoader)(),g(t)}window.addEventListener("DOMContentLoaded",S),f.addEventListener("click",(function(e){f.classList.add("disabled"),v.classList.remove("disabled"),f.disabled=e.target,v.disabled=!e.target,h=!0,b=!1,S()})),v.addEventListener("click",(function(e){(0,m.loaderShow)(),v.classList.add("disabled"),f.classList.remove("disabled"),v.disabled=e.target,f.disabled=!e.target,h=!1,b=!0;var t=JSON.parse(localStorage.getItem("queuedCard"));(0,m.hideLoader)(),g(t)}));var C=new(0,l.GetMovieApi),w={backdrop:document.querySelector(".backdrop"),modalOpenClose:document.querySelector(".js-modalOpenClose"),closeBtn:document.querySelector("[data-modal-close]"),modalCard:document.querySelector(".movie-modal")},O=null,L=[],E=[];function y(){return(y=e(d)(e(c).mark((function t(a){var r,n,d,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.target!==a.currentTarget){e.next=3;break}return e.abrupt("return");case 3:return d=a.target.parentNode.getAttribute("id"),e.prev=4,e.next=7,C.fetchMoviebyId(d);case 7:O=e.sent,(0,i.renderMovieCard)(O),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0);case 14:(o={addQueue:document.querySelector(".modal-button-queue"),addWatched:document.querySelector(".modal-button-watched")}).addQueue.addEventListener("click",M),o.addWatched.addEventListener("click",x),w.backdrop.classList.toggle("is-hidden"),w.closeBtn.addEventListener("click",N),w.backdrop.addEventListener("click",q),window.addEventListener("keydown",k),(null===(r=JSON.parse(localStorage.getItem("watchedCard")))||void 0===r?void 0:r.find((function(e){return e.id===Number(d)})))&&(o.addWatched.textContent="REMOVE FROM WATCHED",o.addWatched.classList.add("watched")),(null===(n=JSON.parse(localStorage.getItem("queuedCard")))||void 0===n?void 0:n.find((function(e){return e.id===Number(d)})))&&(o.addQueue.textContent="REMOVE FROM QUEUED",o.addQueue.classList.add("queued"));case 23:case"end":return e.stop()}}),t,null,[[4,11]])})))).apply(this,arguments)}function N(){w.backdrop.classList.toggle("is-hidden"),window.removeEventListener("keydown",k),w.modalCard.innerHTML=""}function q(e){e.currentTarget===e.target&&N()}function k(e){"Escape"===e.code&&N()}function x(t){if(!t.target.classList.contains("watched"))return JSON.parse(localStorage.getItem("watchedCard"))&&(L=JSON.parse(localStorage.getItem("watchedCard"))),L.push(O),localStorage.setItem("watchedCard",JSON.stringify(L)),h&&g(L),t.target.classList.add("watched"),void(t.target.textContent="REMOVE FROM WATCHED");var a=(L=JSON.parse(localStorage.getItem("watchedCard"))).filter((function(e){return Number(e.id)!==Number(O.id)}));L=e(o)(a),localStorage.setItem("watchedCard",JSON.stringify(L)),h&&g(L),t.target.classList.remove("watched"),t.target.textContent="ADD TO WATCHED"}function M(t){if(!t.target.classList.contains("queued"))return JSON.parse(localStorage.getItem("queuedCard"))&&(E=JSON.parse(localStorage.getItem("queuedCard"))),E.push(O),localStorage.setItem("queuedCard",JSON.stringify(E)),b&&g(E),t.target.classList.add("queued"),void(t.target.textContent="REMOVE FROM QUEUED");var a=(E=JSON.parse(localStorage.getItem("queuedCard"))).filter((function(e){return Number(e.id)!==Number(O.id)}));E=e(o)(a),localStorage.setItem("queuedCard",JSON.stringify(E)),b&&g(E),t.target.classList.remove("queued"),t.target.textContent="ADD TO QUEUED"}w.modalOpenClose.addEventListener("click",(function(e){return y.apply(this,arguments)})),n("7F1pg")}();
//# sourceMappingURL=my-library.3a86df9b.js.map
