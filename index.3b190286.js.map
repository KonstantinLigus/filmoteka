{"mappings":"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","sources":["src/js/genresOfMovies.js","src/js/createModal.js","src/js/modalOpenClose.js"],"sourcesContent":["const genres = JSON.parse(localStorage.getItem('genres'));\n\nexport function getGenre(genresIds) {\n  if (genresIds.length === 0) {\n    return 'no info';\n  }\n  const genresNames = getGenresNames(genres, genresIds);\n  if (genresNames.length > 3) {\n    const filteredNames = filteredGenresNames(genresNames);\n    filteredNames.push('Other');\n    return filteredNames.join(', ');\n  }\n  return genresNames.join(', ');\n}\n\nfunction getGenresNames(genres, genresIds) {\n  return genres\n    .filter(genre => genresIds.includes(genre.id))\n    .map(obj => obj.name);\n}\n\nfunction filteredGenresNames(genresNames) {\n  return (filteredGenres = genresNames.filter((el, ind) => {\n    if (ind < 2) {\n      return true;\n    }\n  }));\n}\n","import { getGenre } from './genresOfMovies';\n\nexport function createMovieCard(movie) {\n  const { poster_path, title, genre_ids, popularity, vote_average, vote_count, overview, id } = movie;\n  const titleUp = title.toUpperCase();\n  return ` <div class=\"movie-card__item\">\n      <img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" class=\"movie-card__poster\" />\n    </div>\n    <div class=\"movie-card__item\">\n      <h1 class=\"movie-card__title\"> ${titleUp} </h1>\n      <ul class=\"movie-card__info\">\n        <li class=\"movie-card__info--item\">\n          <h2 class=\"movie-card__info--title\"> Vote / Votes </h2>\n          <p class=\"movie-card__content--item\"><span class=\"movie-card__vote\"> ${vote_average} </span> / ${vote_count} </p>\n        </li>\n        <li class=\"movie-card__info--item\">\n          <h2 class=\"movie-card__info--title\"> Popularity </h2>\n          <p class=\"movie-card__content--item\"> ${popularity} </p>\n        </li>\n        <li class=\"movie-card__info--item\">\n          <h2 class=\"movie-card__info--title\"> Movie Title </h2>\n          <p class=\"movie-card__content--item\"> ${titleUp} </p>\n        </li>\n        <li class=\"movie-card__info--item\">\n          <h2 class=\"movie-card__info--title\"> Genre </h2>\n          <p class=\"movie-card__content--item\"> ${getGenre(genre_ids)} </p>\n      </ul>\n      <h2 class=\"movie-card__about\">About</h2>\n      <p class=\"movie-card__about--content\"> ${overview} </p>\n      <div class=\"button-wrapper\">\n      <button type=\"button\" class=\"modal-button modal-button-watched\">Add to watched</button>\n      <button type=\"button\" class=\"modal-button modal-button-queue\">Add to queue</button>\n      </div>\n    </div>`;\n}\n","import { createMovieCard } from './createModal';\n\nconst refs = {\n  backdrop: document.querySelector('.backdrop'),\n  modalOpenClose: document.querySelector('.js-modalOpenClose'),\n  closeBtn: document.querySelector('[data-modal-close]'),\n  modalCard: document.querySelector('.movie-modal'),\n};\nlet movie = null;\nlet watchedMovie = [];\nlet queuedMovie = [];\n\nrefs.modalOpenClose.addEventListener('click', onModalOpen);\n\nexport function onModalOpen(e) {\n  e.preventDefault();\n  const card = e.target.parentNode;\n  const id = card.getAttribute('id');\n\n  movie = JSON.parse(localStorage.getItem('searchedMovies')).find(\n    movie => movie.id === Number(id)\n  );\n  renderMovieCard(movie);\n  const btnRefs = {\n    addQueue: document.querySelector('.modal-button-queue'),\n    addWatched: document.querySelector('.modal-button-watched'),\n  };\n  btnRefs.addQueue.addEventListener('click', onQueueBtnClick);\n  btnRefs.addWatched.addEventListener('click', onBtnWatchedClick);\n\n  refs.backdrop.classList.toggle('is-hidden');\n  refs.closeBtn.addEventListener('click', onModalClose);\n  refs.backdrop.addEventListener('click', onBackdropClose);\n  window.addEventListener('keydown', closeOnKeydown);\n\n  if (\n    JSON.parse(localStorage.getItem('watchedCard'))?.find(\n      movie => movie.id === Number(id)\n    )\n  ) {\n    btnRefs.addWatched.textContent = 'REMOVE FROM WATCHED';\n    btnRefs.addWatched.classList.add('watched');\n  }\n  if (\n    JSON.parse(localStorage.getItem('queuedCard'))?.find(\n      movie => movie.id === Number(id)\n    )\n  ) {\n    btnRefs.addQueue.textContent = 'REMOVE FROM QUEUED';\n    btnRefs.addQueue.classList.add('queued');\n  }\n}\n\nfunction onModalClose() {\n  refs.backdrop.classList.toggle('is-hidden');\n  window.removeEventListener('keydown', closeOnKeydown);\n  refs.modalCard.innerHTML = '';\n}\n\nfunction onBackdropClose(e) {\n  if (e.currentTarget === e.target) {\n    onModalClose();\n  }\n}\nfunction closeOnKeydown(e) {\n  if (e.code === 'Escape') {\n    onModalClose();\n  }\n}\n\nfunction renderMovieCard(movie) {\n  refs.modalCard.innerHTML = createMovieCard(movie);\n}\n\nfunction onBtnWatchedClick(e) {\n  if (!e.target.classList.contains('watched')) {\n    if (JSON.parse(localStorage.getItem('watchedCard'))) {\n      watchedMovie = JSON.parse(localStorage.getItem('watchedCard'));\n    }\n    watchedMovie.push(movie);\n    localStorage.setItem('watchedCard', JSON.stringify(watchedMovie));\n    e.target.classList.add('watched');\n    e.target.textContent = 'REMOVE FROM WATCHED';\n    return;\n  } else {\n    /* (e.target.classList.contains('watched')) */\n    watchedMovie = JSON.parse(localStorage.getItem('watchedCard'));\n    const filterWatchedMovie = watchedMovie.filter(\n      item => Number(item.id) !== Number(movie.id)\n    );\n    watchedMovie = [...filterWatchedMovie];\n    localStorage.setItem('watchedCard', JSON.stringify(watchedMovie));\n    e.target.classList.remove('watched');\n    e.target.textContent = 'ADD TO WATCHED';\n  }\n}\n\nfunction onQueueBtnClick(e) {\n  if (!e.target.classList.contains('queued')) {\n    if (JSON.parse(localStorage.getItem('queuedCard'))) {\n      queuedMovie = JSON.parse(localStorage.getItem('queuedCard'));\n    }\n    queuedMovie.push(movie);\n    localStorage.setItem('queuedCard', JSON.stringify(queuedMovie));\n    e.target.classList.add('queued');\n    e.target.textContent = 'REMOVE FROM QUEUED';\n    return;\n  } else {\n    /* (e.target.classList.contains('watched')) */\n    queuedMovie = JSON.parse(localStorage.getItem('queuedCard'));\n    const filterQueuedMovie = queuedMovie.filter(\n      item => Number(item.id) !== Number(movie.id)\n    );\n    queuedMovie = [...filterQueuedMovie];\n    localStorage.setItem('queuedCard', JSON.stringify(queuedMovie));\n    e.target.classList.remove('queued');\n    e.target.textContent = 'ADD TO QUEUED';\n  }\n}\n"],"names":["$2b9330aa780f05bf$var$genres","JSON","parse","localStorage","getItem","$2b9330aa780f05bf$export$11ff5302ebb1cd30","genresIds","length","genresNames","genres1","filter","genre","includes","id","map","obj","name","$2b9330aa780f05bf$var$getGenresNames","filteredNames","filteredGenres","el","ind","$2b9330aa780f05bf$var$filteredGenresNames","push","join","$3JWO1","parcelRequire","$5496ab3eda0ce95c$var$refs","backdrop","document","querySelector","modalOpenClose","closeBtn","modalCard","$5496ab3eda0ce95c$var$movie","$5496ab3eda0ce95c$var$watchedMovie","$5496ab3eda0ce95c$var$queuedMovie","$5496ab3eda0ce95c$var$onModalClose","classList","toggle","window","removeEventListener","$5496ab3eda0ce95c$var$closeOnKeydown","innerHTML","$5496ab3eda0ce95c$var$onBackdropClose","e","currentTarget","target","code","$5496ab3eda0ce95c$var$onBtnWatchedClick","contains","setItem","stringify","add","textContent","filterWatchedMovie","item","Number","remove","$5496ab3eda0ce95c$var$onQueueBtnClick","filterQueuedMovie","addEventListener","ref","ref1","preventDefault","parentNode","getAttribute","find","movie1","movie4","movie","poster_path","title","genre_ids","popularity","vote_average","vote_count","overview","titleUp","toUpperCase","getGenre","btnRefs","addQueue","addWatched","movie2","movie3"],"version":3,"file":"index.3b190286.js.map"}