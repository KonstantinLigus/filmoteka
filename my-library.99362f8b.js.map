{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aCAAC,EAAAD,EAAA,S,aAGO,SAASE,EAAiBC,GAChB,OAAXA,GAAqC,IAAlBA,EAAOC,OAK9BH,EAAAI,QAAQC,UAGV,SAAyBH,GACvB,OAAOA,EACJI,KAAI,EAACC,YAAEA,EAAWC,MAAEA,EAAKC,OAAEA,EAAMC,aAAEA,EAAYC,GAAEA,MAChD,MAAMC,EAsBZ,SAA4BF,GAC1B,MAAqB,KAAjBA,EACK,UAEFA,aAAA,EAAAA,EAAcG,MAAM,EAAG,GA1BNC,CAAmBJ,GACjCK,EAAUP,EAAMQ,cAChBC,EAASC,EAAcX,GACvBY,EAcZ,SAAmBV,GACjB,OAAOA,EAAOH,KAAI,EAACK,GAAEA,KACZA,IAhBSS,CAAUX,GACxB,MAAO,gCAAgCE,oEAG5BM,qBACDT,mDAEmBO,mDACO,EAAAM,EAAAC,UAASH,QAAYP,sBAG1DW,KAAK,IApBYC,CAAgBtB,GAJlCF,EAAAI,QAAQC,UACN,2EAsCN,SAASa,EAAcX,GACrB,OAAoB,OAAhBA,EACMU,OACN,+DAEG,kCAAkCV,ID3C3C,MAAMkB,EAAc,IAAI,EAAAC,EAAAC,aAEXC,EAAO,CAClBC,SAAUC,SAASC,cAAc,aACjCC,eAAgBF,SAASC,cAAc,sBACvCE,SAAUH,SAASC,cAAc,sBACjCG,UAAWJ,SAASC,cAAc,iBAEpC,IAAII,EAAQ,KACRC,EAAe,GACfC,EAAc,GAgDlB,SAASC,IACPV,EAAKC,SAASU,UAAUC,OAAO,aAC/BC,OAAOC,oBAAoB,UAAWC,GACtCf,EAAKM,UAAU7B,UAAY,GAG7B,SAASuC,EAAgBC,GACnBA,EAAEC,gBAAkBD,EAAEE,QACxBT,IAGJ,SAASK,EAAeE,GACP,WAAXA,EAAEG,MACJV,IAQG,SAASW,EAAkBJ,GAChC,IAAKA,EAAEE,OAAOR,UAAUW,SAAS,WAS/B,OARIC,KAAKC,MAAMC,aAAaC,QAAQ,kBAClClB,EAAee,KAAKC,MAAMC,aAAaC,QAAQ,iBAEjDlB,EAAamB,KAAKpB,GAClBkB,aAAaG,QAAQ,cAAeL,KAAKM,UAAUrB,IACnDnC,EAAiBmC,GACjBS,EAAEE,OAAOR,UAAUmB,IAAI,gBACvBb,EAAEE,OAAOY,YAAc,uBAElB,CAELvB,EAAee,KAAKC,MAAMC,aAAaC,QAAQ,gBAC/C,MAAMM,EAAqBxB,EAAayB,QACtCC,GAAQC,OAAOD,EAAKnD,MAAQoD,OAAO5B,EAAMxB,MAE3CyB,EAAe,IAAIwB,GACnBP,aAAaG,QAAQ,cAAeL,KAAKM,UAAUrB,IACnDnC,EAAiBmC,GACjBS,EAAEE,OAAOR,UAAUyB,OAAO,WAC1BnB,EAAEE,OAAOY,YAAc,kBAIpB,SAASM,EAAgBpB,GAC9B,IAAKA,EAAEE,OAAOR,UAAUW,SAAS,UAS/B,OARIC,KAAKC,MAAMC,aAAaC,QAAQ,iBAClCjB,EAAcc,KAAKC,MAAMC,aAAaC,QAAQ,gBAEhDjB,EAAYkB,KAAKpB,GACjBkB,aAAaG,QAAQ,aAAcL,KAAKM,UAAUpB,IAClDpC,EAAiBoC,GACjBQ,EAAEE,OAAOR,UAAUmB,IAAI,eACvBb,EAAEE,OAAOY,YAAc,sBAElB,CAELtB,EAAcc,KAAKC,MAAMC,aAAaC,QAAQ,eAC9C,MAAMY,EAAoB7B,EAAYwB,QACpCC,GAAQC,OAAOD,EAAKnD,MAAQoD,OAAO5B,EAAMxB,MAE3C0B,EAAc,IAAI6B,GAClBb,aAAaG,QAAQ,aAAcL,KAAKM,UAAUpB,IAElDpC,EAAiBoC,GAEjBQ,EAAEE,OAAOR,UAAUyB,OAAO,UAC1BnB,EAAEE,OAAOY,YAAc,iBAnH3B/B,EAAKI,eAAemC,iBAAiB,SAE9BC,eAA2BvB,G,IA2B9BwB,EAQAC,EAjCF,MACM3D,EADOkC,EAAEE,OAAOwB,WACNC,aAAa,MAI7B,IACErC,QAAcV,EAAYgD,eAAe9D,IACzC,EAAAb,EAAA4E,iBAAgBvC,GAChB,MAAOwC,GACPC,QAAQD,MAAMA,GAGhB,MAAME,EAAU,CACdC,SAAUhD,SAASC,cAAc,uBACjCgD,WAAYjD,SAASC,cAAc,0BAErC8C,EAAQC,SAASX,iBAAiB,QAASF,GAC3CY,EAAQE,WAAWZ,iBAAiB,QAASlB,GAE7CrB,EAAKC,SAASU,UAAUC,OAAO,aAC/BZ,EAAKK,SAASkC,iBAAiB,QAAS7B,GACxCV,EAAKC,SAASsC,iBAAiB,QAASvB,GACxCH,OAAO0B,iBAAiB,UAAWxB,IAGc,QAA/C0B,EAAAlB,KAAKC,MAAMC,aAAaC,QAAQ,uBAAe,IAA/Ce,OAAA,EAAAA,EAAiDW,MAC/CC,GAASA,EAAMtE,KAAOoD,OAAOpD,QAG/BkE,EAAQE,WAAWpB,YAAc,sBACjCkB,EAAQE,WAAWxC,UAAUmB,IAAI,aAGa,QAA9CY,EAAAnB,KAAKC,MAAMC,aAAaC,QAAQ,sBAAc,IAA9CgB,OAAA,EAAAA,EAAgDU,MAC9CE,GAASA,EAAMvE,KAAOoD,OAAOpD,QAG/BkE,EAAQC,SAASnB,YAAc,qBAC/BkB,EAAQC,SAASvC,UAAUmB,IAAI,cE1DnC,MAAMyB,EAAcrD,SAASC,cAAc,2BACrCqD,EAActD,SAASC,cAAc,yBAMpC,SAASsD,EAAcC,GAE5BrF,EADekD,KAAKC,MAAMC,aAAaC,QAAQ,iBALjDb,OAAO0B,iBAAiB,mBAAoBkB,GAC5CF,EAAYhB,iBAAiB,SAQtB,SAA4BmB,GACjCH,EAAY5C,UAAUmB,IAAI,YAC1B0B,EAAY7C,UAAUyB,OAAO,YAC7BmB,EAAYI,SAAWD,EAAMvC,OAC7BqC,EAAYG,UAAYD,EAAMvC,OAC9BsC,OAZFD,EAAYjB,iBAAiB,SAetB,SAA4BmB,GACjCF,EAAY7C,UAAUmB,IAAI,YAC1ByB,EAAY5C,UAAUyB,OAAO,YAC7BoB,EAAYG,SAAWD,EAAMvC,OAC7BoC,EAAYI,UAAYD,EAAMvC,OAG9B9C,EADekD,KAAKC,MAAMC,aAAaC,QAAQ","sources":["src/js/modalOpenCloseLib.js","src/js/createLibrary.js","src/js/onLibraryLoad.js"],"sourcesContent":["import { renderMovieCard } from './createModal';\nimport { GetMovieApi } from './fetchMovies';\nimport { renderMovieCards } from './createLibrary';\n\n// import { locationURl } from './onLibraryLoad';\n\nconst getMovieApi = new GetMovieApi();\n\nexport const refs = {\n  backdrop: document.querySelector('.backdrop'),\n  modalOpenClose: document.querySelector('.js-modalOpenClose'),\n  closeBtn: document.querySelector('[data-modal-close]'),\n  modalCard: document.querySelector('.movie-modal'),\n};\nlet movie = null;\nlet watchedMovie = [];\nlet queuedMovie = [];\n\nrefs.modalOpenClose.addEventListener('click', onModalOpen);\n\nexport async function onModalOpen(e) {\n  // e.preventDefault();\n  const card = e.target.parentNode;\n  const id = card.getAttribute('id');\n  // movie = JSON.parse(localStorage.getItem('searchedMovies')).find(\n  //   movie => movie.id === Number(id)\n  // );\n  try {\n    movie = await getMovieApi.fetchMoviebyId(id);\n    renderMovieCard(movie);\n  } catch (error) {\n    console.error(error);\n  }\n  // renderMovieCard(movie);\n  const btnRefs = {\n    addQueue: document.querySelector('.modal-button-queue'),\n    addWatched: document.querySelector('.modal-button-watched'),\n  };\n  btnRefs.addQueue.addEventListener('click', onQueueBtnClick);\n  btnRefs.addWatched.addEventListener('click', onBtnWatchedClick);\n\n  refs.backdrop.classList.toggle('is-hidden');\n  refs.closeBtn.addEventListener('click', onModalClose);\n  refs.backdrop.addEventListener('click', onBackdropClose);\n  window.addEventListener('keydown', closeOnKeydown);\n\n  if (\n    JSON.parse(localStorage.getItem('watchedCard'))?.find(\n      movie => movie.id === Number(id)\n    )\n  ) {\n    btnRefs.addWatched.textContent = 'REMOVE FROM WATCHED';\n    btnRefs.addWatched.classList.add('watched');\n  }\n  if (\n    JSON.parse(localStorage.getItem('queuedCard'))?.find(\n      movie => movie.id === Number(id)\n    )\n  ) {\n    btnRefs.addQueue.textContent = 'REMOVE FROM QUEUED';\n    btnRefs.addQueue.classList.add('queued');\n  }\n}\n\nfunction onModalClose() {\n  refs.backdrop.classList.toggle('is-hidden');\n  window.removeEventListener('keydown', closeOnKeydown);\n  refs.modalCard.innerHTML = '';\n}\n\nfunction onBackdropClose(e) {\n  if (e.currentTarget === e.target) {\n    onModalClose();\n  }\n}\nfunction closeOnKeydown(e) {\n  if (e.code === 'Escape') {\n    onModalClose();\n  }\n}\n\n// function renderMovieCard(movie) {\n//   refs.modalCard.innerHTML = createMovieCard(movie);\n// }\n\nexport function onBtnWatchedClick(e) {\n  if (!e.target.classList.contains('watched')) {\n    if (JSON.parse(localStorage.getItem('watchedCard'))) {\n      watchedMovie = JSON.parse(localStorage.getItem('watchedCard'));\n    }\n    watchedMovie.push(movie);\n    localStorage.setItem('watchedCard', JSON.stringify(watchedMovie));\n    renderMovieCards(watchedMovie);\n    e.target.classList.add('watched');\n    e.target.textContent = 'REMOVE FROM WATCHED';\n    return;\n  } else {\n    /* (e.target.classList.contains('watched')) */\n    watchedMovie = JSON.parse(localStorage.getItem('watchedCard'));\n    const filterWatchedMovie = watchedMovie.filter(\n      item => Number(item.id) !== Number(movie.id)\n    );\n    watchedMovie = [...filterWatchedMovie];\n    localStorage.setItem('watchedCard', JSON.stringify(watchedMovie));\n    renderMovieCards(watchedMovie);\n    e.target.classList.remove('watched');\n    e.target.textContent = 'ADD TO WATCHED';\n  }\n}\n\nexport function onQueueBtnClick(e) {\n  if (!e.target.classList.contains('queued')) {\n    if (JSON.parse(localStorage.getItem('queuedCard'))) {\n      queuedMovie = JSON.parse(localStorage.getItem('queuedCard'));\n    }\n    queuedMovie.push(movie);\n    localStorage.setItem('queuedCard', JSON.stringify(queuedMovie));\n    renderMovieCards(queuedMovie);\n    e.target.classList.add('queued');\n    e.target.textContent = 'REMOVE FROM QUEUED';\n    return;\n  } else {\n    /* (e.target.classList.contains('watched')) */\n    queuedMovie = JSON.parse(localStorage.getItem('queuedCard'));\n    const filterQueuedMovie = queuedMovie.filter(\n      item => Number(item.id) !== Number(movie.id)\n    );\n    queuedMovie = [...filterQueuedMovie];\n    localStorage.setItem('queuedCard', JSON.stringify(queuedMovie));\n    // if (locationURl === window.location.toString()) {\n    renderMovieCards(queuedMovie);\n    // }\n    e.target.classList.remove('queued');\n    e.target.textContent = 'ADD TO QUEUED';\n  }\n}\n","import { gallery } from './references';\nimport { getGenre } from './genresOfMovies';\n\nexport function renderMovieCards(movies) {\n  if (movies === null || movies.length === 0) {\n    gallery.innerHTML =\n      '<img src=https://via.placeholder.com/440x660.jpg?text=There+Are+Empty />';\n    return;\n  }\n  gallery.innerHTML = createMovieCard(movies);\n}\n\nfunction createMovieCard(movies) {\n  return movies\n    .map(({ poster_path, title, genres, release_date, id }) => {\n      const releaseDate = releaseDateChecker(release_date);\n      const titleUp = title.toUpperCase();\n      const poster = posterChecker(poster_path);\n      const genre = genreById(genres);\n      return `<li class=\"gallery__item\" id=${id}>\n        <img\n          class=\"gallery__img\"\n          src=\"${poster}\"\n          alt=${title}\n        />\n        <p class=\"gallery__name\">${titleUp}</p>\n        <p class=\"gallery__information\">${getGenre(genre)} | ${releaseDate}</p>\n    </li>`;\n    })\n    .join('');\n}\n\nfunction genreById(genres) {\n  return genres.map(({ id }) => {\n    return id;\n  });\n}\nfunction releaseDateChecker(release_date) {\n  if (release_date === '') {\n    return 'no info';\n  }\n  return release_date?.slice(0, 4);\n}\n\nfunction posterChecker(poster_path) {\n  if (poster_path === null) {\n    return (poster =\n      'https://via.placeholder.com/440x660.jpg?text=Image+Not+Found');\n  }\n  return `https://image.tmdb.org/t/p/w500${poster_path}`;\n}\n","import { renderMovieCards } from './createLibrary';\n\nconst libBtnWatch = document.querySelector('[data-action=\"watched\"]');\nconst libBtnQueue = document.querySelector('[data-action=\"queue\"]');\n\nwindow.addEventListener('DOMContentLoaded', onLibraryLoad);\nlibBtnWatch.addEventListener('click', onClickLibBtnWatch);\nlibBtnQueue.addEventListener('click', onClickLibBtnQueue);\n\nexport function onLibraryLoad(event) {\n  const movies = JSON.parse(localStorage.getItem('watchedCard'));\n  renderMovieCards(movies);\n}\n\nexport function onClickLibBtnWatch(event) {\n  libBtnWatch.classList.add('disabled');\n  libBtnQueue.classList.remove('disabled');\n  libBtnWatch.disabled = event.target;\n  libBtnQueue.disabled = !event.target;\n  onLibraryLoad();\n}\n\nexport function onClickLibBtnQueue(event) {\n  libBtnQueue.classList.add('disabled');\n  libBtnWatch.classList.remove('disabled');\n  libBtnQueue.disabled = event.target;\n  libBtnWatch.disabled = !event.target;\n\n  const movies = JSON.parse(localStorage.getItem('queuedCard'));\n  renderMovieCards(movies);\n}\n"],"names":["$31L8x","parcelRequire","$1sEOH","$c7c36ca32babbe02$export$bc472845f7b7844b","movies","length","gallery","innerHTML","map","poster_path","title","genres","release_date","id","releaseDate","slice","$c7c36ca32babbe02$var$releaseDateChecker","titleUp","toUpperCase","poster","$c7c36ca32babbe02$var$posterChecker","genre","$c7c36ca32babbe02$var$genreById","$3JWO1","getGenre","join","$c7c36ca32babbe02$var$createMovieCard","$1d777fcb72d100bf$var$getMovieApi","$1TPJ0","GetMovieApi","$1d777fcb72d100bf$export$21666b427502ea6d","backdrop","document","querySelector","modalOpenClose","closeBtn","modalCard","$1d777fcb72d100bf$var$movie","$1d777fcb72d100bf$var$watchedMovie","$1d777fcb72d100bf$var$queuedMovie","$1d777fcb72d100bf$var$onModalClose","classList","toggle","window","removeEventListener","$1d777fcb72d100bf$var$closeOnKeydown","$1d777fcb72d100bf$var$onBackdropClose","e","currentTarget","target","code","$1d777fcb72d100bf$export$e3cd2a9e9061f2c1","contains","JSON","parse","localStorage","getItem","push","setItem","stringify","add","textContent","filterWatchedMovie","filter","item","Number","remove","$1d777fcb72d100bf$export$47c64e1cb6fdbeb7","filterQueuedMovie","addEventListener","async","ref","ref1","parentNode","getAttribute","fetchMoviebyId","renderMovieCard","error","console","btnRefs","addQueue","addWatched","find","movie1","movie2","$c0a1cbc97978a26e$var$libBtnWatch","$c0a1cbc97978a26e$var$libBtnQueue","$c0a1cbc97978a26e$export$4cda8f1f13aeae6d","event","disabled"],"version":3,"file":"my-library.99362f8b.js.map"}